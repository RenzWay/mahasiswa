(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{7380:(e,t,a)=>{"use strict";a.d(t,{default:()=>S});var s=a(95155),l=a(93088),n=a(12115),r=a(54416),i=a(90437),o=a(13717),d=a(62525);function c(e){let{onedit:t,tugas:a=[]}=e,[l,c]=(0,n.useState)("semua"),u=a.filter(e=>"semua"===l||("selesai"===l?!0===e.status:"belum"!==l||!1===e.status));return(0,s.jsxs)("div",{className:"p-4 sm:p-10 sm:m-12 bg-white rounded-md shadow-md",children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold border-b border-b-neutral-400 pb-2",children:"Daftar Tugas"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4 mt-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded transition-all duration-200 ".concat("semua"===l?"bg-blue-500 text-white":"bg-neutral-400"),onClick:()=>c("semua"),children:"Semua"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded transition-all duration-200 ".concat("belum"===l?"bg-blue-500 text-white":"bg-neutral-400"),onClick:()=>c("belum"),children:"Belum selesai"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded transition-all duration-200 ".concat("selesai"===l?"bg-blue-500 text-white":"bg-neutral-400"),onClick:()=>c("selesai"),children:"Selesai"})]}),(0,s.jsx)("div",{className:"mt-6 min-h-[150px]",children:u.length>0?(0,s.jsx)("ul",{className:"flex flex-col gap-6",children:u.map(e=>(0,s.jsxs)("li",{className:"bg-white shadow-md p-4 sm:p-6 rounded-xl border border-gray-200",children:[(0,s.jsxs)("header",{className:"flex flex-col sm:flex-row justify-between gap-3 sm:items-center mb-3",children:[(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:e.title}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-sm font-medium px-3 py-1 rounded-full ".concat("tinggi"===e.priority?"bg-red-100 text-red-700":"sedang"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:["Prioritas: ",e.priority]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{if(e.status){let t=a.map(t=>t.id===e.id?{...t,status:!1}:t);localStorage.setItem("tugas",JSON.stringify(t))}else{let t=a.map(t=>t.id===e.id?{...t,status:!0}:t);localStorage.setItem("tugas",JSON.stringify(t))}location.reload()},title:e.status?"Tandai Belum Selesai":"Tandai Selesai",children:e.status?(0,s.jsx)(r.A,{className:"text-red-500"}):(0,s.jsx)(i.A,{className:"text-green-500"})}),(0,s.jsx)("button",{title:"Edit",onClick:()=>t(e),children:(0,s.jsx)(o.A,{className:"text-sky-500"})}),(0,s.jsx)("button",{onClick:()=>{let t=a.filter(t=>t.id!==e.id);localStorage.setItem("tugas",JSON.stringify(t)),location.reload()},title:"Buang",children:(0,s.jsx)(d.A,{className:"text-rose-500"})})]})]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 mb-2 flex flex-col sm:flex-row sm:flex-wrap gap-2",children:[(0,s.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Kategori: ",e.category]}),(0,s.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Deadline: ",e.date," ",e.time]}),(0,s.jsx)("span",{className:"$".concat(e.status?"text-green-600 bg-green-100":"text-orange-600 bg-orange-100"," px-2 py-1 rounded"),children:e.status?"✔ Selesai":"⏳ Belum selesai"})]}),(0,s.jsx)("div",{className:"ql-editor border-none p-0 text-gray-800 text-sm sm:text-base",dangerouslySetInnerHTML:{__html:e.content}})]},e.id))}):(0,s.jsx)("div",{className:"text-center text-gray-600 py-6",children:"Tidak ada tugas dalam kategori ini."})})]})}var u=a(16557),m=a(17553),x=a(61090),g=a(97370),h=a(30832),p=a.n(h);a(67352),a(87548);var b=a(38430);a(90107);var f=a(93050),j=a(81115);async function w(e){try{return await (0,j.hZ)((0,j.KR)(f.db,"tugas/".concat(e.id)),e),!0}catch(e){return console.error("Firebase Save Error:",e.message),!1}}async function y(e){try{let t=await (0,j.Jt)((0,j.jf)((0,j.KR)(f.db),"tugas"));if(t.exists()){let a=t.val();return Object.values(a).filter(t=>t.uid===e)}return[]}catch(e){return console.error("Firebase Get Error:",e.message),[]}}var N=a(90858);async function v(e){if(!e)return"";let t="".concat(Date.now(),"-").concat(e.name),a=(0,N.KR)(f.I,"attachments/".concat(t));try{return await (0,N.D)(a,e),await (0,N.qk)(a)}catch(e){return console.error("Upload error:",e.message),""}}function S(){let e=(0,n.useRef)(null),[t,r]=(0,n.useState)(""),[i,o]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[f,j]=(0,n.useState)("tinggi"),[N,S]=(0,n.useState)("matkul"),[k,C]=(0,n.useState)(!1),[T,D]=(0,n.useState)(null),[I,_]=(0,n.useState)(!1),[E,A]=(0,n.useState)(null),[H,K]=(0,n.useState)([]);(0,n.useEffect)(()=>{window.hljs=b.default,a.e(635).then(a.bind(a,7635)).then(t=>{e.current=new t.default("#editor",{theme:"snow",modules:{syntax:!0,toolbar:"#toolbar-container"},placeholder:"Isi tugas anda..."})}),(async()=>{let e=localStorage.getItem("useruid");e&&K(await y(e))})()},[]);let B=async a=>{var s,l;a.preventDefault();let n=localStorage.getItem("useruid");if(!n)return void alert("Harus login dulu");let r=Date.now(),o={id:r,uid:n,title:t,date:i,time:d,priority:f,category:N,status:k,content:null!=(l=null==(s=e.current)?void 0:s.root.innerHTML)?l:"",attachment:await v(T)};await w(o)?(K(I?H.map(e=>e.id===r?o:e):[...H,o]),L(),alert("Tugas berhasil disimpan!")):alert("Gagal menyimpan tugas.")},L=()=>{r(""),o(""),h(""),j("tinggi"),S("matkul"),C(!1),D(null),_(!1),A(null),e.current&&(e.current.root.innerHTML="")};return(0,s.jsxs)("section",{children:[(0,s.jsx)("nav",{className:"flex items-center justify-between px-6 py-4 bg-sky-400 text-white rounded-b-sm shadow-md mb-6",children:(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83D\uDCCC Tugas"})}),(0,s.jsx)(x.$,{dateAdapter:g.R,children:(0,s.jsxs)("form",{onSubmit:B,className:"space-y-4 max-w-2xl mx-auto bg-white p-6 rounded shadow",id:"formTugas",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2 text-center",children:"Tambah Tugas"}),(0,s.jsx)("input",{type:"text",id:"title",className:"block w-full border rounded p-2",placeholder:"Judul Tugas",value:t,onChange:e=>r(e.target.value)}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(u.j,{setDate:o,date:i})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"font-medium block mb-1",children:"Waktu Deadline"}),(0,s.jsx)(m.o,{defaultValue:p()(),onChange:e=>h(e.format("HH:mm"))})]})]}),(0,s.jsxs)("select",{className:"block w-full border rounded p-2",value:f,onChange:e=>j(e.target.value),children:[(0,s.jsx)("option",{value:"tinggi",children:"Tinggi"}),(0,s.jsx)("option",{value:"sedang",children:"Sedang"}),(0,s.jsx)("option",{value:"rendah",children:"Rendah"})]}),(0,s.jsxs)("select",{className:"block w-full border rounded p-2",value:N,onChange:e=>S(e.target.value),children:[(0,s.jsx)("option",{value:"matkul",children:"Matkul"}),(0,s.jsx)("option",{value:"pribadi",children:"Pribadi"}),(0,s.jsx)("option",{value:"organisasi",children:"Organisasi"}),(0,s.jsx)("option",{value:"lainnya",children:"Lainnya"})]}),(0,s.jsx)(l.A,{}),(0,s.jsx)("div",{className:"h-56 border rounded",id:"editor"}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:k,onChange:e=>C(e.target.checked)}),"Selesai"]}),(0,s.jsx)("input",{type:"file",className:"block w-full mt-1",onChange:e=>D(e.target.files[0])}),(0,s.jsx)("button",{className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded p-2 mt-4",children:"Simpan Tugas"})]})}),(0,s.jsx)("div",{className:"w-full px-4 mt-10",children:(0,s.jsx)("div",{className:"w-full max-w-3xl mx-auto",children:(0,s.jsx)("input",{type:"search",placeholder:"Cari tugas... \uD83D\uDD0D",className:"w-full px-4 py-3 pl-12 rounded-lg border bg-white shadow-md"})})}),(0,s.jsx)(c,{onedit:function(t){r(t.title),o(t.date),h(t.time),j(t.priority),S(t.category),C(t.status),D(null),A(t.id),_(!0),e.current&&(e.current.root.innerHTML=t.content),document.getElementById("formTugas").scrollIntoView({behavior:"smooth"})},tugas:H})]})}a(16203)},23380:(e,t,a)=>{Promise.resolve().then(a.bind(a,7380))},93050:(e,t,a)=>{"use strict";a.d(t,{I:()=>u,db:()=>c,j:()=>d});var s=a(23915),l=a(16203),n=a(81115),r=a(90858),i=a(86864);let o=(0,s.Wp)({apiKey:"AIzaSyBbVcUDTbALKHr2wTN_KqJ6h_atpK9gMWc",authDomain:"mahasiswa-center-fc372.firebaseapp.com",projectId:"mahasiswa-center-fc372",storageBucket:"mahasiswa-center-fc372.firebasestorage.app",messagingSenderId:"1072398170302",appId:"1:1072398170302:web:ac1abae443343947cf06ef",measurementId:"G-EL1ZY0055M"});(0,i.P5)(o);let d=(0,l.xI)(o),c=(0,n.C3)(o),u=(0,r.c7)(o)}},e=>{var t=t=>e(e.s=t);e.O(0,[478,507,811,319,585,642,869,351,43,430,346,252,659,418,441,684,358],()=>t(23380)),_N_E=e.O()}]);